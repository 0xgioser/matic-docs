---
id: commitments
title: Обязательства и обнулители
sidebar_label: Commitment and Nullifiers
description: "Однократный и двойной трансфер."
keywords:
  - docs
  - polygon
  - nightfall
  - commitment
  - nullifier
image: https://matic.network/banners/matic-network-16x9.png
---


## Что такое обязательства? {#what-are-commitments}
Обязательство — это криптографический примитив, который позволяет пользователю зафиксировать выбранное значение,
сохраняя его скрытым для других лиц, с возможностью раскрыть зафиксированное значение позже.
Таким образом обеспечивается конфиденциальность значения и получателя.

Каждый раз, когда пользователь выполняет транзакцию с помощью Nightfall, кошелек в браузере вычисляет
доказательство с нулевым разглашением (ZKP) и создает (или аннулирует) обязательство.
Например, вы создаете обязательство, когда делаете депозит или трансфер, и аннулируете обязательство, когда
делаете трансфер или вывод.

Вычисление ZKP опирается на [схемы](../protocol/circuits.md), определяющие правила, которым
должна следовать транзакция, чтобы быть правильной.

Обязательство используется для скрытия следующих свойств:
- **Адрес ERC токена**
- **Идентификатор токена**
- **Значение**
- **Владелец**

Обязательства хранятся в структуре *дерева Меркла*. Корень этого *дерева Меркла* хранится в цепочке.

![](../imgs/commitment.png)

### UTXO {#utxo}
Обязательства создаются при выполнении депозитов и трансферов, и расходуются при выполнении трансферов и выводов. **Обязательства не объединяются**. При расходовании обязательства значение потраченного обязательства ограничено значением не более двух принадлежащих вам обязательств.

Текущие схемы трансфера и вывода с ZKP, используемые в Nightfall, ограничены двумя входными данными — двумя выходными данными (обязательство по трансферу/выводу и изменение), за исключением платежей.
Если набор обязательств участника транзакции содержит преимущественно обязательства с низким значением (пыль), могут возникнуть трудности при осуществлении будущих трансферов.

Отметьте следующие наборы значений

- **Набор A**: [1, 1, 1, 1, 1, 1]
- **Набор B**: [2, 2, 2]
- **Набор C**: [2, 4]

Хотя все три набора имеют одинаковую общую сумму, трансферы с максимальным значением, которые могут быть совершены наборами *A*, *B* и *C*, равны 2, 4 и 6 соответственно. Это одна из причин, почему предпочтение отдается значениям больших обязательств. Используемая стратегия отбора обязательств смягчает этот риск за счет придания приоритета использованию обязательств с небольшими значениями, при этом также минимизируется создание обязательств типа «пыль».


## Что такое обнулители? {#what-are-nullifiers}
**Обнулитель** — это результат сочетания обязательства и аннулирующего ключа. После трансляции обнулителя в цепочке обязательство считается потраченным.
Обнулители хранятся в цепочке как часть данных вызова во время предложения блока.

![](../imgs/nullifier.png)




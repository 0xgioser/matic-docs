---
id: commitments
title: コミットメントとヌールファイア
sidebar_label: Commitment and Nullifiers
description: "シングル転送とダブル転送。"
keywords:
  - docs
  - polygon
  - nightfall
  - commitment
  - nullifier
image: https://matic.network/banners/matic-network-16x9.png
---


## コミットメントとは何ですか？ {#what-are-commitments}
コミットメントは暗号化プリミティブであり、ユーザは選択した値をコミットすると同時に、コミットされた値を後で明らかにする機能で、他のユーザに非表示にすることができます。
このようにして、価値と受領者の機密性が達成されます。

ユーザがNightfallを使用してトランザクションを実行するたびに、ブラウザウォレットはゼロナレッジプルーフ（ZKP）を計算し、コミットメントを作成（またはヌールファイア）します。
たとえば、デポジットまたは転送の際にコミットメントを作成し、転送または引き出しの際にコミットメントを無効にします。

ZKP計算は、トランザクションが正しいために従う必要があるルールを定義する[回線](../protocol/circuits.md)に依存します。

コミットは、次のプロパティを非表示にするために使用されます：
- **トークンのERCアドレス**
- **トークンID**
- **値**
- **所有者**

コミットメントは*Merkle Tree*構造に格納されます。この*Merkle Tree*のルートは、チェーン上に保存されます。

![](../imgs/commitment.png)

### UTXO {#utxo}
コミットメントは、預貯金および振替の際に作成され、振替および引き落としの取引時に使用されます。**コミットメントは集約されません**。コミットメントを使用する場合、使用するコミットメントの価値は、所有するコミットメントの最大2つの値に制限されます。

Nightfallで使用されている現在のZKP転送および引き出し回路は、支払いを除く2入力-2出力（転送/引き出しコミットメントおよび変更）に制限されます。
トランザクタのコミットメントのセットに、主に価値の低いコミットメント（ダスト）が含まれている場合、将来の転送を実行するのは困難になる可能性があります。

次の値セットを監視します

- **セットA**：[1、1、1、1、1、1]
- **セットB**：[2、2、2]
- **セットC**：[2、4]

3つのセットはすべて等価合計を持ちますが、セット*A*、*B*、および*C*によってトランザクション可能な最大値転送は、それぞれ2、4、および6です。これは、大きなコミットメント値が優先される理由の1つです。コミットメント選択戦略は、小さな価値コミットメントの使用を優先すると同時に、ダストコミットメントの作成を最小限に抑えることで、このリスクを軽減します。


## ヌールファイアとは何ですか？ {#what-are-nullifiers}
**ヌールファイア**は、コミットメントとヌールファイア鍵の組み合わせの結果です。ヌールファイアがオンチェーンでブロードキャストされると、コミットは使用済みと見なされます。
ヌールファイアは、ブロックプロポーザル中にコールデータの一部としてチェーン上に保存されます。

![](../imgs/nullifier.png)



